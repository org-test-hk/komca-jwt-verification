<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.komca.foundation.jwt.mapper.query.PermissionQueryMapper">
	<resultMap id="permissionResultMap" type="kr.or.komca.foundation.jwt.domain.entity.Permission">
		<id property="permissionNo" column="PERMISSION_NO"/>
		<result property="permissionName" column="PERMISSION_NAME"/>
		<result property="description" column="DESCRIPTION"/>
		<result property="regDate" column="RED_DATE"/>
		<result property="modDate" column="MOD_DATE"/>
		<result property="delYn" column="DEL_YN"/>
	</resultMap>

	<select id="findByRoleNo" resultMap="permissionResultMap">
		SELECT p.*
		FROM t_permission p
				 JOIN t_role_permission rp ON p.permission_no = rp.permission_no
		WHERE rp.role_no = #{roleNo}
		  AND p.del_yn = 'N'
		  AND rp.del_yn = 'N'
	</select>

	<select id="findByPermissionName" resultMap="permissionResultMap">
		SELECT *
		FROM t_permission
		WHERE permission_name = #{permissionName}
		  AND del_yn = 'N'
	</select>

	<select id="findAll" resultMap="permissionResultMap">
		SELECT *
		FROM t_permission
		WHERE del_yn = 'N'
		ORDER BY permission_no
	</select>
</mapper>